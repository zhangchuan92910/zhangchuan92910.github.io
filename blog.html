<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog - Chuan Zhang</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .filter-btn.active {
            background-color: #3b82f6; /* blue-500 */
            color: white;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- 导航栏 (Navigation Bar) -->
    <nav class="bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b border-gray-200">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- 导航左侧: 名字 -->
                <div class="flex-shrink-0">
                    <a href="index.html" class="text-xl font-bold text-gray-900">Chuan Zhang</a>
                </div>
                <!-- 导航右侧: 链接 -->
                <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
                    <a href="index.html" class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700">
                        About Me
                    </a>
                    <a href="research.html" class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700">
                        Research
                    </a>
                    <a href="blog.html" class="inline-flex items-center px-1 pt-1 border-b-2 border-blue-500 text-sm font-medium text-gray-900">
                        Blog
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主体内容 (Main Content) -->
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-20">
        
        <section id="blog-posts">
            <h1 class="text-3xl font-bold text-gray-900 mb-8">Blog & Personal Interests</h1>
            
            <p class="text-lg text-gray-700 mb-8">
                Here I write about topics that interest me, from academic takeaways to personal hobbies. Posts are organized by category.
            </p>

            <!-- 博客布局: 筛选器 + 列表 -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">

                <!-- 左侧: 筛选器 (Filters) -->
                <aside class="md:col-span-1">
                    <div class="bg-white p-6 rounded-lg shadow sticky top-24">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Categories</h3>
                        <div id="filter-container" class="space-y-2">
                            <!-- 筛选按钮将由 JavaScript 动态插入这里 -->
                            <button class="filter-btn w-full text-left px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100 active" data-category="all">
                                All Posts
                            </button>
                        </div>
                    </div>
                </aside>

                <!-- 右侧: 文章列表 (Post List) -->
                <main class="md:col-span-3">
                    <div id="post-list-container" class="space-y-8">
                        <!-- 文章卡片将由 JavaScript 动态插入这里 -->
                        <p class="text-gray-500">Loading posts...</p>
                    </div>
                </main>

            </div>
        </section>

    </div>

    <!-- 页脚 (Footer) -->
    <footer class="bg-white border-t border-gray-200 mt-12">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-6 text-center text-sm text-gray-500">
            &copy; [Current Year] [Your Name]. All rights reserved.
        </div>
    </footer>

    <!-- 你的博客文章 "数据库" -->
    <script src="blog-posts.js"></script>
    
    <!-- 动态加载和过滤的逻辑 -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const postListContainer = document.getElementById('post-list-container');
            const filterContainer = document.getElementById('filter-container');
            
            // 确保 blogPosts 变量 (来自 blog-posts.js) 存在
            if (typeof blogPosts === 'undefined') {
                postListContainer.innerHTML = '<p class="text-red-500">Error: Could not load blog-posts.js</p>';
                return;
            }

            // 1. 生成所有分类 (Generate all categories)
            const categories = ['all', ...new Set(blogPosts.map(post => post.category))];
            filterContainer.innerHTML = ''; // 清空加载中的按钮
            
            categories.forEach(category => {
                const button = document.createElement('button');
                button.className = 'filter-btn w-full text-left px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100';
                button.textContent = category.charAt(0).toUpperCase() + category.slice(1); // e.g., "Technical"
                button.dataset.category = category;
                if (category === 'all') {
                    button.classList.add('active'); // 默认激活 "All"
                }
                button.addEventListener('click', () => filterPosts(category));
                filterContainer.appendChild(button);
            });

            // 2. 过滤文章的函数
            window.filterPosts = (category) => {
                // 更新激活按钮的样式
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.category === category);
                });
                
                // 过滤和显示文章
                const filteredPosts = (category === 'all') 
                    ? blogPosts 
                    : blogPosts.filter(post => post.category === category);
                
                renderPosts(filteredPosts);
            };

            // 3. 渲染文章列表的函数
            const renderPosts = (posts) => {
                postListContainer.innerHTML = ''; // 清空列表
                
                if (posts.length === 0) {
                    postListContainer.innerHTML = '<p class="text-gray-500">No posts in this category yet.</p>';
                    return;
                }
                
                posts.forEach(post => {
                    // 为每篇文章创建一个链接，指向 post.html 模板
                    // 并使用 URL 参数告诉模板要加载哪个 md 文件
                    const postUrl = `post.html?post=${encodeURIComponent(post.file)}`;
                    
                    const postCard = `
                        <div class="bg-white p-8 rounded-lg shadow">
                            <h2 class="text-xl font-semibold text-gray-900 hover:text-blue-600">
                                <a href="${postUrl}">${post.title}</a>
                            </h2>
                            <p class="text-sm text-gray-500 mb-4">
                                ${post.date} | Category: ${post.category.charAt(0).toUpperCase() + post.category.slice(1)}
                            </p>
                            <p class="text-gray-700">
                                ${post.description}
                            </p>
                            <a href="${postUrl}" class="inline-block mt-4 text-blue-600 font-medium hover:underline">Read more &rarr;</a>
                        </div>
                    `;
                    postListContainer.innerHTML += postCard;
                });
            };

            // 4. 初始加载 (Initial load)
            renderPosts(blogPosts); // 默认显示所有文章
        });
    </script>
</body>
</html>

