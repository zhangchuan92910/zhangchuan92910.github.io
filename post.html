<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Post - Chuan Zhang</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
    <!-- 引入 marked.js 库, 用于将 Markdown 转换为 HTML -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* 为生成的 HTML (来自 .md) 添加样式 */
        .markdown-content h1 {
            font-size: 2.25rem; /* text-4xl */
            font-weight: 700; /* font-bold */
            margin-bottom: 1.5rem; /* mb-6 */
        }
        .markdown-content h2 {
            font-size: 1.875rem; /* text-3xl */
            font-weight: 600; /* font-semibold */
            margin-top: 2rem; /* mt-8 */
            margin-bottom: 1rem; /* mb-4 */
            border-bottom: 1px solid #e5e7eb; /* border-gray-200 */
            padding-bottom: 0.5rem; /* pb-2 */
        }
        .markdown-content h3 {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 600; /* font-semibold */
            margin-top: 1.5rem; /* mt-6 */
            margin-bottom: 0.5rem; /* mb-2 */
        }
        .markdown-content p {
            font-size: 1.125rem; /* text-lg */
            line-height: 1.75; /* leading-loose */
            margin-bottom: 1.5rem; /* mb-6 */
        }
        .markdown-content ul, .markdown-content ol {
            margin-bottom: 1.5rem; /* mb-6 */
            margin-left: 1.5rem; /* ml-6 */
            list-style-position: outside;
        }
        .markdown-content ul {
            list-style-type: disc;
        }
        .markdown-content ol {
            list-style-type: decimal;
        }
        .markdown-content li > p {
            margin-bottom: 0.5rem; /* mb-2 */
        }
        .markdown-content a {
            color: #2563eb; /* text-blue-600 */
            text-decoration: underline;
        }
        .markdown-content a:hover {
            color: #1d4ed8; /* text-blue-800 */
        }
        .markdown-content code {
            background-color: #f3f4f6; /* bg-gray-100 */
            padding: 0.25rem 0.5rem; /* px-2 py-1 */
            border-radius: 0.375rem; /* rounded-md */
            font-family: monospace;
            font-size: 0.9em;
        }
        .markdown-content pre {
            background-color: #1f2937; /* bg-gray-800 */
            color: #f9fafb; /* text-gray-50 */
            padding: 1rem; /* p-4 */
            border-radius: 0.5rem; /* rounded-lg */
            overflow-x: auto;
            margin-bottom: 1.5rem; /* mb-6 */
        }
        .markdown-content pre code {
            background-color: transparent;
            padding: 0;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- 导航栏 (Navigation Bar) -->
    <nav class="bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b border-gray-200">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- 导航左侧: 名字 -->
                <div class="flex-shrink-0">
                    <a href="index.html" class="text-xl font-bold text-gray-900">Chuan Zhang</a>
                </div>
                <!-- 导航右侧: 链接 -->
                <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
                    <a href="index.html" class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700">
                        About Me
                    </a>
                    <a href="research.html" class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700">
                        Research
                    </a>
                    <a href="blog.html" class="inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700">
                        Blog
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主体内容 (Main Content) -->
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-20">
        <main class="bg-white p-8 md:p-12 rounded-lg shadow">
            
            <!-- 返回博客列表的链接 -->
            <a href="blog.html" class="text-blue-600 font-medium hover:underline mb-8 inline-block">&larr; Back to all posts</a>

            <!-- Markdown 内容将被加载到这里 -->
            <div id="post-content" class="markdown-content">
                <p class="text-lg text-gray-500">Loading post...</p>
            </div>
        </main>
    </div>

    <!-- 页脚 (Footer) -->
    <footer class="bg-white border-t border-gray-200 mt-12">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-6 text-center text-sm text-gray-500">
            &copy; 2025 Chuan Zhang. All rights reserved.
        </div>
    </footer>

    <!-- 加载和渲染 Markdown 的逻辑 -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const postContent = document.getElementById('post-content');
            
            // 1. 从 URL 获取要加载的文章
            const params = new URLSearchParams(window.location.search);
            const postFile = params.get('post'); // e.g., "blog/technical/competitive-programming.md"

            if (!postFile) {
                postContent.innerHTML = '<h1>Error</h1><p>No post specified. Please return to the blog page.</p>';
                return;
            }

            // 2. 抓取 .md 文件
            fetch(postFile)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Could not load post. Status: ${response.status}`);
                    }
                    return response.text();
                })
                .then(markdown => {
                    // 3. 使用 marked.js 将 Markdown 转换为 HTML
                    // 注意: marked.parse() 是新版v4+的用法
                    postContent.innerHTML = marked.parse(markdown);
                })
                .catch(error => {
                    console.error('Error fetching post:', error);
                    postContent.innerHTML = `
                        <h1>Error</h1>
                        <p>Sorry, could not find the post at <code>${postFile}</code>.</p>
                        <p>Please check the file path in <code>blog-posts.js</code>.</p>
                    `;
                });
        });
    </script>
</body>
</html>
